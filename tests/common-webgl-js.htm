<!doctype html>
<meta charset=utf-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<title>common webgl.js Tests</title>
<link href=../../common/css/core.css rel=stylesheet>
<style>canvas{display:none}</style>

<a href=../../index.htm>iterami</a>/<a href=../index.htm>Docs.htm</a>/<a href=index.htm>Tests</a>/<a href=../../common/index.htm>common</a>/<a href=../common/js/webgl.htm>webgl.js</a>
<table>
  <tr class=header>
    <td>Test Levels
    <td>Size
  <tr>
    <td><a href=multiverse/test-paths.json>test-paths.json</a>
    <td>~7kb
  <tr>
    <td><a href=multiverse/test-picking.json>test-picking.json</a>
    <td>~4kb
  <tr>
    <td><a href=multiverse/test-webgl_primitive_cuboid.json>test-webgl_primitive_cuboid.json</a>
    <td>~2kb
  <tr>
    <td><a href=multiverse/test-webgl_primitive_ellipsoid.json>test-webgl_primitive_ellipsoid.json</a>
    <td>~2kb
  <tr>
    <td><a href=multiverse/test-webgl_primitive_frustum.json>test-webgl_primitive_frustum.json</a>
    <td>~2kb
</table>
<table id=results></table>

<script src=../../common/js/core.js></script>
<script src=../../common/js/test.js></script>
<script src=../../common/js/math.js></script>
<script src=../../common/js/entity.js></script>
<script src=../../common/js/webgl.js></script>
<script>
function repo_init(){
    core_repo_init({
      'title': 'Docs.htm',
    });
    webgl_level_load({
      'character': -1,
    });
    webgl_character_init({
      'id': 'test-character-0',
    });

    document.getElementById('results').innerHTML = test_run({
      'link': '../common/js/',
      'tests': [
        {
          'args': {
            'id': 'test-character-1',
            'level': 5,
          },
          'expect': function(returned){
              return webgl_characters['test-character-1']['health-current'] > 0;
          },
          'function': 'webgl_character_init',
        },
        {
          'args': void 0,
          'expect': -1,
          'function': 'webgl_character_level',
        },
        {
          'args': {
            'character': 'fake-character',
          },
          'expect': -2,
          'function': 'webgl_character_level',
        },
        {
          'args': {
            'character': 'test-character-1',
          },
          'expect': 5,
          'function': 'webgl_character_level',
        },
        {
          'args': {
            'green': 1,
          },
          'expect': function(returned){
              return webgl_properties['clearcolor-blue'] === 0
                && webgl_properties['clearcolor-green'] === 1
                && webgl_properties['clearcolor-red'] === 0;
          },
          'function': 'webgl_clearcolor_set',
        },
        {
          'args': {
            'id': 'EXT_texture_filter_anisotropic',
            'label': 'anisotropic',
          },
          'expect': true,
          'function': 'webgl_extension',
        },
        {
          'args': {
            'rotate-x': webgl_characters['test-character-0']['rotate-x'],
            'rotate-y': webgl_characters['test-character-0']['rotate-y'],
            'rotate-z': webgl_characters['test-character-0']['rotate-z'],
            'vertices-length': 1,
          },
          'expect': [
            0,
            1,
            0,
          ],
          'function': 'webgl_normals',
        },
        {
          'args': {
            'x': 0,
            'y': 0,
          },
          'expect': [
            0,
            0,
            0,
            0,
          ],
          'function': 'webgl_pick_color',
        },
        {
          'args': {
            'colors': [
              {
                'blue': 0,
                'green': 255,
                'red': 0,
              },
            ],
            'vertexcount': 2,
          },
          'expect': [
            0,
            1,
            0,
            1,
            0,
            1,
            0,
            1,
          ],
          'function': 'webgl_vertexcolorarray',
        },
      ],
    });
}

function repo_logic(){
}
</script>
