<!doctype html>
<meta charset=utf-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<title>common core.js Tests</title>
<link href=../../common/css/core.css rel=stylesheet>
<style>
pre{
    margin: 0;
}
</style>

<a href=../../index.htm>iterami</a>/<a href=../index.htm>Docs.htm</a>/<a href=index.htm>Tests</a>/<a href=../../common/index.htm>common</a>/<a href=../common/js/core.htm>core.js</a>
<table class=left id=consts></table>
<table class=left id=results></table>

<script src=../../common/js/core.js></script>
<script src=../../common/js/test.js></script>
<script>
function repo_init(){
    core_repo_init({
      'title': 'Docs.htm',
    });

    document.getElementById('consts').innerHTML = test_consts({
      'consts': [
        'Number.EPSILON',
      ],
    });
    document.getElementById('results').innerHTML = test_run({
      'link': '../common/js/',
      'tests': [
        {
          'args': {},
          'expect': {},
          'function': 'core_args',
        },
        {
          'args': {
            'args': {},
            'defaults': {
              'test-default-arg': 7,
            },
          },
          'expect': {
            'test-default-arg': 7,
          },
          'function': 'core_args',
        },
        {
          'args': {
            'digits': 3,
            'number': 7777,
          },
          'expect': '7777',
          'function': 'core_digits_min',
        },
        {
          'args': {
            'digits': 3,
            'number': 7,
          },
          'expect': '007',
          'function': 'core_digits_min',
        },
        {
          'args': {
            'digits': 3,
            'number': -7,
          },
          'expect': '-007',
          'function': 'core_digits_min',
        },
        {
          'args': {
            'digits': 3,
            'number': -7.7,
          },
          'expect': '-007.7',
          'function': 'core_digits_min',
        },
        {
          'args': {
            'a': 0.1 + 0.2 + 0.3,
            'b': 0.6,
            'precision': 0,
          },
          'expect': false,
          'function': 'core_float_compare',
        },
        {
          'args': {
            'a': 0.1 + 0.2 + 0.3,
            'b': 0.6,
            'precision': Number.EPSILON,
          },
          'expect': true,
          'function': 'core_float_compare',
        },
        {
          'args': {
            'a': 0.1 + 0.2 + 0.3,
            'b': 0.6,
            'precision': 1e-15,
          },
          'expect': true,
          'function': 'core_float_compare',
        },
        {
          'args': {
            'a': 0.1 + 0.2 + 0.3,
            'b': 0.6,
            'precision': 1e-16,
          },
          'expect': false,
          'function': 'core_float_compare',
        },
        {
          'args': '#abc',
          'expect': {
            'blue': 204,
            'green': 187,
            'red': 170,
          },
          'function': 'core_hex_to_rgb',
        },
        {
          'args': '#abcdef',
          'expect': {
            'blue': 239,
            'green': 205,
            'red': 171,
          },
          'function': 'core_hex_to_rgb',
        },
        {
          'args': {
            'parent': document.body,
            'properties': {
              'id': 'core_html-element',
            },
          },
          'expect': function(result){
              return document.getElementById('core_html-element') === result;
          },
          'function': 'core_html',
        },
        {
          'args': '<u>\'"&</u>',
          'expect': '&lt;u&gt;&#39;&#34;&amp;&lt;/u&gt;',
          'function': 'core_html_format',
        },
        {
          'args': {
            'decimals-max': 3,
            'number': '123456.789',
          },
          'expect': '123,456.789',
          'function': 'core_number_format',
        },
        {
          'args': {
            'decimals-min': 5,
            'number': '123456.789',
          },
          'expect': '123,456.78900',
          'function': 'core_number_format',
        },
        {
          'args': void 0,
          'expect': function(result){
              return typeof result === 'boolean';
          },
          'function': 'core_random_boolean',
        },
        {
          'args': 0,
          'expect': false,
          'function': 'core_random_boolean',
        },
        {
          'args': void 0,
          'expect': function(result){
              return typeof result === 'string' && result.length === 6;
          },
          'function': 'core_random_hex',
        },
        {
          'args': void 0,
          'expect': function(result){
              return Number.isInteger(result);
          },
          'function': 'core_random_integer',
        },
        {
          'args': {
            'max': 1,
          },
          'expect': 0,
          'function': 'core_random_integer',
        },
        {
          'args': {
            'max': 1,
            'todo': 'ceil',
          },
          'expect': 1,
          'function': 'core_random_integer',
        },
        {
          'args': {
            'test-key': 1,
          },
          'expect': 'test-key',
          'function': 'core_random_key',
        },
        {
          'args': {
            'length': 5,
          },
          'expect': function(result){
              return typeof result === 'string';
          },
          'function': 'core_random_string',
        },
        {
          'args': {
            'patterns': {
              'i ': ' ',
              'it': '',
            },
            'string': 'iterami iterami iterami',
          },
          'expect': 'eram eram erami',
          'function': 'core_replace_multiple',
        },
        {
          'args': {
            'decimals': 0,
            'number': 123.456,
          },
          'expect': 123,
          'function': 'core_round',
        },
        {
          'args': {
            'decimals': 1,
            'number': 123.456,
          },
          'expect': 123.5,
          'function': 'core_round',
        },
        {
          'args': {
            'decimals': 1,
            'number': 1.234e23,
          },
          'expect': 1.2e23,
          'function': 'core_round',
        },
        {
          'args': {
            'array': [
              8,
              16,
              4,
              42,
              23,
              15,
            ],
          },
          'expect': [
            4,
            8,
            15,
            16,
            23,
            42,
          ],
          'function': 'core_sort_numbers',
        },
        {
          'args': {
            'array': [
              {
                'test': 1,
              },
              {
                'test': 0,
              },
              {
                'test': 3,
              },
              {
                'test': 2,
              },
            ],
            'property': 'test',
          },
          'expect': function(result){
              return result[0]['test'] === 0
                && result[1]['test'] === 1
                && result[2]['test'] === 2
                && result[3]['test'] === 3;
          },
          'function': 'core_sort_property',
        },
        {
          'args': {
            'array': [
              'eight',
              'sixteen',
              'four',
              'fortytwo',
              'twentythree',
              'fifteen',
            ],
          },
          'expect': [
            'eight',
            'fifteen',
            'fortytwo',
            'four',
            'sixteen',
            'twentythree',
          ],
          'function': 'core_sort_strings',
        },
        {
          'args': [1, 2, 3],
          'expect': 'array',
          'function': 'core_type',
        },
        {
          'args': false,
          'expect': 'boolean',
          'function': 'core_type',
        },
        {
          'args': true,
          'expect': 'boolean',
          'function': 'core_type',
        },
        {
          'args': function(){
              return false;
          },
          'expect': 'function',
          'function': 'core_type',
        },
        {
          'args': 7777,
          'expect': 'number',
          'function': 'core_type',
        },
        {
          'args': {
            'property': 'value',
          },
          'expect': 'object',
          'function': 'core_type',
        },
        {
          'args': 'text goes here',
          'expect': 'string',
          'function': 'core_type',
        },
        {
          'args': void 0,
          'expect': 'undefined',
          'function': 'core_type',
        },
      ],
    });
}
</script>
