<!doctype html>
<meta charset=utf-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<title>webgl.js</title>
<link href=../../../common/css/writings.css rel=stylesheet>

<a href=../../../index.htm>iterami</a>/<a href=../../index.htm>Docs.htm</a>/<a href=../index.htm>common</a>/<a href=../guides/htm.htm>HTM</a>/<a class=external href=https://github.com/iterami/common/blob/gh-pages/js/webgl.js rel=noopener>webgl.js</a>
<ul>
  <li><a href=#globals>Globals</a>
  <li>Requires:<ul>
    <li><a href=core.htm>core.js</a>
    <li><a href=entity.htm>entity.js</a>
    <li><a href=genre.htm>genre.js</a>
    <li><a href=math.htm>math.js</a>
  </ul>
  <li>Functions:<ul>
    <li><a href=#webgl_buffer_set>webgl_buffer_set(args)</a>
    <li><a href=#webgl_buffer_set_type>webgl_buffer_set_type(args)</a>
    <li><a href=#webgl_camera_handle>webgl_camera_handle()</a>
    <li><a href=#webgl_camera_rotate>webgl_camera_rotate(args)</a>
    <li><a href=#webgl_camera_zoom>webgl_camera_zoom()</a>
    <li><a href=#webgl_clamp_rotation>webgl_clamp_rotation(args)</a>
    <li><a href=#webgl_clearcolor_set>webgl_clearcolor_set(args)</a>
    <li><a href=#webgl_collision>webgl_collision(args)</a>
    <li><a href=#webgl_draw>webgl_draw()</a>
    <li><a href=#webgl_draw_entity>webgl_draw_entity(entity)</a>
    <li><a href=#webgl_drawloop>webgl_drawloop()</a>
    <li><a href=#webgl_extension>webgl_extension(args)</a>
    <li><a href=#webgl_get_translation>webgl_get_translation(args)</a>
    <li><a href=#webgl_init>webgl_init(args)</a>
    <li><a href=#webgl_json_export>webgl_json_export(args)</a>
    <li><a href=#webgl_level_init>webgl_level_init(args)</a>
    <li><a href=#webgl_level_load>webgl_level_load(args)</a>
    <li><a href=#webgl_level_unload>webgl_level_unload()</a>
    <li><a href=#webgl_logicloop>webgl_logicloop()</a>
    <li><a href=#webgl_logicloop_handle_entity>webgl_logicloop_handle_entity(entity)</a>
    <li><a href=#webgl_normals>webgl_normals(args)</a>
    <li><a href=#webgl_perspective>webgl_perspective()</a>
    <li><a href=#webgl_pick_color>webgl_pick_color(args)</a>
    <li><a href=#webgl_program_create>webgl_program_create(args)</a>
    <li><a href=#webgl_resize>webgl_resize()</a>
    <li><a href=#webgl_settings_init>webgl_settings_init()</a>
    <li><a href=#webgl_shader_create>webgl_shader_create(args)</a>
    <li><a href=#webgl_shader_recreate>webgl_shader_recreate()</a>
    <li><a href=#webgl_texture_set>webgl_texture_set(args)</a>
    <li><a href=#webgl_vertexattribarray_set>webgl_vertexattribarray_set(args)</a>
    <li><a href=#webgl_vertexcolorarray>webgl_vertexcolorarray(args)</a>
  </ul>
</ul>
<hr id=globals>
<table>
  <tr class=header>
    <td>Globals
    <td>Default
    <td>Type
  <tr>
    <td>webgl_buffer
    <td>0
    <td>placeholder, CanvasRenderingContext2D
  <tr>
    <td>webgl_canvas
    <td>0
    <td>placeholder, CanvasRenderingContext2D
  <tr>
    <td>webgl_diagonal
    <td>0
    <td>number
  <tr>
    <td>webgl_extensions
    <td>{}
    <td>object
  <tr>
    <td>webgl_levelcache
    <td>{}
    <td>object
  <tr>
    <td>webgl_properties
    <td>{}
    <td>object
  <tr>
    <td>webgl_shaders
    <td>false
    <td>boolean false or object
  <tr>
    <td>webgl_text
    <td>{}
    <td>object
</table>
<hr id=webgl_buffer_set>
webgl_buffer_set(args)
<ul>
  <li>Returns the created buffers for a specific entity.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>colorData
    <td>
    <td>array of numbers
  <tr>
    <td>normalData
    <td>
    <td>array of numbers
  <tr>
    <td>textureData
    <td>
    <td>array of numbers
  <tr>
    <td>vertexData
    <td>
    <td>array of numbers
</table>
<hr id=webgl_buffer_set_type>
webgl_buffer_set_type(args)
<ul>
  <li>Creates, binds, and returns a buffer.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>data
    <td>
    <td>array
  <tr>
    <td>type
    <td>'Float32Array'
    <td>string
</table>
<hr id=webgl_camera_handle>
webgl_camera_handle()
<ul>
  <li>Functon used as "mousemove" event by 3D projects.
  <li>Handle first and third person cameras via the "camera-zoom-current" character property.
</ul>
<hr id=webgl_camera_rotate>
webgl_camera_rotate(args)
<ul>
  <li>Handles rotating the camera and character.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>camera
    <td>true
    <td>boolean
  <tr>
    <td>character
    <td>webgl_character_id
    <td>string ID
  <tr>
    <td>mouse
    <td>true
    <td>boolean
  <tr>
    <td>set
    <td>false
    <td>boolean
  <tr>
    <td>x
    <td>0
    <td>number
  <tr>
    <td>y
    <td>0
    <td>number
  <tr>
    <td>z
    <td>0
    <td>number
</table>
<hr id=webgl_camera_zoom>
webgl_camera_zoom()
<ul>
  <li>Functon called by bound "mousewheel" event within "mousebinds".
</ul>
<hr id=webgl_clamp_rotation>
webgl_clamp_rotation(args)
<ul>
  <li>Clamps x/y/z rotation to less than 360 and greater than or equal to 0.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>entity
    <td>
    <td>character/entity object
</table>
<hr id=webgl_clearcolor_set>
webgl_clearcolor_set(args)
<ul>
  <li>Stores and sets the clear color.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>blue
    <td>0
    <td>number
  <tr>
    <td>green
    <td>0
    <td>number
  <tr>
    <td>red
    <td>0
    <td>number
</table>
<hr id=webgl_collision>
webgl_collision(args)
<ul>
  <li>Checks for collision between characters/entities.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>collider
    <td>
    <td>character/entity object
  <tr>
    <td>target
    <td>
    <td>entity object
</table>
<hr id=webgl_draw>
webgl_draw()
<ul>
  <li>Handles canvas clearing and drawing the "buffer" onto the "canvas".
  <li>Sets up matricies, sets up the camera, and draws all created entities in specific order.
  <li>Draws text, pointer, and other 2D canvas UI elements.
</ul>
<hr id=webgl_draw_entity>
webgl_draw_entity(entity)
<ul>
  <li>Positions and draws an entity.
</ul>
<hr id=webgl_drawloop>
webgl_drawloop()
<ul>
  <li>Calls "webgl_draw()" if the menu isn't open.
  <li>Handles animation frames via "core_interval_animationFrame()" usage.
</ul>
<hr id=webgl_extension>
webgl_extension(args)
<ul>
  <li>Attempts to get a WebGL extension based on the supplied "id" arg.
  <li>If the extension is available, it gets added to "window.webgl_extensions" using the "label" arg.
  <li>Returns a boolean indicating if the extension is available or not.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>id
    <td>
    <td>string ID
  <tr>
    <td>label
    <td>args['id']
    <td>string ID
</table>
<hr id=webgl_get_translation>
webgl_get_translation(args)
<ul>
  <li>Gets the translation of an entity or charcter.
  <li>If attached to something, returns parent translation plus offsets.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>entity
    <td>
    <td>character/entity object
</table>
<hr id=webgl_init>
webgl_init(args)
<ul>
  <li>Sets up WebGL.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>ambient-blue
    <td>1
    <td>number
  <tr>
    <td>ambient-green
    <td>1
    <td>number
  <tr>
    <td>ambient-red
    <td>1
    <td>number
  <tr>
    <td>camera-zoom-max
    <td>50
    <td>number
  <tr>
    <td>clearcolor-blue
    <td>0
    <td>number
  <tr>
    <td>clearcolor-green
    <td>0
    <td>number
  <tr>
    <td>clearcolor-red
    <td>0
    <td>number
  <tr>
    <td>directional-blue
    <td>1
    <td>number
  <tr>
    <td>directional-green
    <td>1
    <td>number
  <tr>
    <td>directional-red
    <td>1
    <td>number
  <tr>
    <td>directional-state
    <td>true
    <td>boolean
  <tr>
    <td>directional-vector
    <td>'0, 1, 0'
    <td>string
  <tr>
    <td>fog-density
    <td>.0001
    <td>number
  <tr>
    <td>fog-state
    <td>false
    <td>boolean
  <tr>
    <td>gravity-acceleration
    <td>-.05
    <td>number
  <tr>
    <td>gravity-axis
    <td>'y'
    <td>string
  <tr>
    <td>gravity-max
    <td>-2
    <td>number
  <tr>
    <td>groups
    <td>[]
    <td>array of string IDs
  <tr>
    <td>jump-movement
    <td>0
    <td>number
  <tr>
    <td>multiplier-jump
    <td>1
    <td>number
  <tr>
    <td>multiplier-speed
    <td>1
    <td>number
  <tr>
    <td>paths
    <td>{}
    <td>object
  <tr>
    <td>shader-fragment
    <td>'fragment-0'
    <td>string ID
  <tr>
    <td>shader-vertex
    <td>'vertex-0'
    <td>string ID
  <tr>
    <td>spawn-rotate-x
    <td>0
    <td>number
  <tr>
    <td>spawn-rotate-y
    <td>0
    <td>number
  <tr>
    <td>spawn-rotate-z
    <td>0
    <td>number
  <tr>
    <td>spawn-translate-x
    <td>0
    <td>number
  <tr>
    <td>spawn-translate-y
    <td>0
    <td>number
  <tr>
    <td>spawn-translate-z
    <td>0
    <td>number
</table>
<hr id=webgl_json_export>
webgl_json_export(args)
<ul>
  <li>Returns exported JSON for level and optionally character.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>character
    <td>true
    <td>boolean
</table>
<hr id=webgl_level_init>
webgl_level_init(args)
<ul>
  <li>Creates a level from a parsed <a href=../guides/json.htm>JSON Level Format</a> file.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>character
    <td>
    <td>number
  <tr>
    <td>json
    <td>false
    <td>boolean false or object
</table>
<hr id=webgl_level_load>
webgl_level_load(args)
<ul>
  <li>Parses a <a href=../guides/json.htm>JSON Level Format</a> file.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>cache
    <td>false
    <td>boolean false or string ID
  <tr>
    <td>character
    <td>0
    <td>number
  <tr>
    <td>json
    <td>false
    <td>boolean false or object
</table>
<hr id=webgl_level_unload>
webgl_level_unload()
<ul>
  <li>Removes all characters that aren't "webgl_character_id" and all entities.
</ul>
<hr id=webgl_logicloop>
webgl_logicloop()
<ul>
  <li>Handles camera movement of various different styles.
  <li>Calls repository-specific "logic()".
  <li>Updates attached entities.
</ul>
<hr id=webgl_logicloop_handle_entity>
webgl_logicloop_handle_entity(entity)
<ul>
  <li>Function called by "webgl_logicloop()" to maintain various entity properties and interactions.
</ul>
<hr id=webgl_normals>
webgl_normals(args)
<ul>
  <li>Returns an array of calculated normals, containing x, y, and z normals based on rotation.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>rotate-x
    <td>0
    <td>number
  <tr>
    <td>rotate-y
    <td>0
    <td>number
  <tr>
    <td>rotate-z
    <td>0
    <td>number
  <tr>
    <td>vertices-length
    <td>1
    <td>number
</table>
<hr id=webgl_perspective>
webgl_perspective()
<ul>
  <li>Sets up the perspective matrix.
</ul>
<hr id=webgl_pick_color>
webgl_pick_color(args)
<ul>
  <li>Returns a "Uint8Array(4)" containing the RGBA value of the specified pixel.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>x
    <td>
    <td>number
  <tr>
    <td>y
    <td>
    <td>number
</table>
<hr id=webgl_program_create>
webgl_program_create(args)
<ul>
  <li>Creates, links, uses, and returns a WebGL shader program.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>shaders
    <td>
    <td>object
</table>
<hr id=webgl_resize>
webgl_resize()
<ul>
  <li>Handles resizing the canvas to current window proportions.
  <li>Resets canvas and WebGL properties that may have been lost upon resize, including resetting the perspective matrix.
</ul>
<hr id=webgl_settings_init>
webgl_settings_init()
<ul>
  <li>Adds a "WebGL" settings tab to the "core-menu" group.
  <li>Must be called directly after "core_repo_init()".
</ul>
<hr id=webgl_shader_create>
webgl_shader_create(args)
<ul>
  <li>Creates and compiles a shader to be used in a program, then returns it.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>source
    <td>
    <td>string
  <tr>
    <td>type
    <td>
    <td>webgl_buffer.FRAGMENT_SHADER or webgl_buffer.VERTEX_SHADER
</table>
<hr id=webgl_shader_recreate>
webgl_shader_recreate()
<ul>
  <li>Deletes the current shader program, if one exists.
  <li>Creates the fragment and vertex shaders.
  <li>Sets up the shader program and uniform locations.
</ul>
<hr id=webgl_texture_set>
webgl_texture_set(args)
<ul>
  <li>Creates a texture based on an image or URI.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>entity
    <td>
    <td>string ID
  <tr>
    <td>texture
    <td>'_texture-default'
    <td>string ID
</table>
<hr id=webgl_vertexattribarray_set>
webgl_vertexattribarray_set(args)
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>attributes
    <td>
    <td>array
  <tr>
    <td>program
    <td>
    <td>WebGL program
</table>
<hr id=webgl_vertexcolorarray>
webgl_vertexcolorarray(args)
<ul>
  <li>Returns an array containing RGBA values normalized to between 0 and 1 for each vertex.
</ul>
<table>
  <tr class=header>
    <td>Arg
    <td>Default
    <td>Type
  <tr>
    <td>random-colors
    <td>false
    <td>boolean
  <tr>
    <td>rgbarray
    <td>[]
    <td>array of numbers
  <tr>
    <td>vertexcount
    <td>4
    <td>number
</table>
